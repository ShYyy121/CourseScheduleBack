import I from"./Navbar-c07d5b63.js";import{a as h}from"./axios-4a70c6fc.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";import{d as U,a as V,b as C,V as y,c as w}from"./VCard-a42e5e86.js";import{a as c,V as _}from"./VRow-c57088bb.js";import{o as u,c as q,w as o,a as l,V as m,b as p,d as r,g as f,h as x,F as g,e as D,f as i,t as d,k as b,v as L,x as S}from"./index-1d7bfa1d.js";import{V as R}from"./VDialog-ed4e416b.js";import"./VMain-829b4bfa.js";const F={name:"ServerRoomInfo",components:{Navbar:I},data(){return{search:"",dialogVisible:!1,dialogTitle:"",headers:[{text:"ID",value:"classroomId"},{text:"机房名称",value:"classroomName"},{text:"设备类型",value:"equipmentType"},{text:"设备数量",value:"equipmentCount"},{text:"容量",value:"capacity"}],classrooms:[],classroomName:"",equipmentType:"",equipmentCount:0,capacity:0,sortBy:"classroomId",sortDesc:!1,backendBaseUrl:""}},computed:{filteredClassrooms(){return this.search===""?this.classrooms:this.classrooms.filter(t=>t.classroomName.toLowerCase().includes(this.search.toLowerCase()))}},mounted(){this.fetchteachingClasses()},methods:{editClassroom(t){this.dialogTitle="编辑",this.classroomName=t.classroomName,this.equipmentType=t.equipmentType,this.equipmentCount=t.equipmentCount,this.capacity=t.capacity,this.dialogVisible=!0},deleteClassroom(t){const e=this.classrooms.indexOf(t);e!==-1&&this.classrooms.splice(e,1)},openDialog(t){this.dialogTitle=t,this.classroomName="",this.equipmentType="",this.equipmentCount="",this.capacity="",this.dialogVisible=!0},saveClassroom(){const t={classroomName:this.classroomName,equipmentType:this.equipmentType,equipmentCount:this.equipmentCount,capacity:this.capacity};h.post(`${this.backendBaseUrl}/api/classroom`,t).then(e=>{alert("保存成功")}),this.classrooms.push(classroom),this.dialogVisible=!1},async fetchteachingClasses(){try{const t=await h.get(`${this.backendBaseUrl}/api/classroom`);this.classrooms=t.data._embedded.classroom.map(e=>({classroomId:e._links.self.href.split("/").pop(),classroomName:e.classroomName,equipmentType:e.equipmentType,equipmentCount:e.equipmentCount,capacity:e.capacity}))}catch(t){console.error(t)}},closeDialog(){this.dialogVisible=!1}}},k=t=>(L("data-v-3312a5ed"),t=t(),S(),t),j=k(()=>i("h1",null,"机房信息",-1)),A=k(()=>i("thead",null,[i("tr",null,[i("th",{class:"text-left"}," 机房名称 "),i("th",{class:"text-left"}," 设备类型 "),i("th",{class:"text-left"}," 设备数量 "),i("th",{class:"text-left"}," 容量 "),i("th",{class:"text-left"}," 操作 ")])],-1));function E(t,e,T,v,a,n){return u(),q(U,null,{default:o(()=>[j,l(_,{class:"mt-4"},{default:o(()=>[l(c,{cols:"12",sm:"6",md:"4",class:"d-flex justify-start"},{default:o(()=>[l(m,{modelValue:a.search,"onUpdate:modelValue":e[0]||(e[0]=s=>a.search=s),label:"搜索",outlined:"",dense:""},null,8,["modelValue"])]),_:1}),l(c,{cols:"12",sm:"6",md:"4",class:"text-right"},{default:o(()=>[l(p,{color:"primary",onClick:e[1]||(e[1]=s=>n.openDialog("添加机房"))},{default:o(()=>[r("添加机房")]),_:1})]),_:1})]),_:1}),l(y,null,{default:o(()=>[l(V,null,{default:o(()=>[l(_,null,{default:o(()=>[(u(!0),f(g,null,x(a.headers,s=>(u(),q(c,{key:s.value,cols:"auto"}))),128))]),_:1})]),_:1}),l(C,null,{default:o(()=>[l(D,null,{default:o(()=>[A,i("tbody",null,[(u(!0),f(g,null,x(a.classrooms,s=>(u(),f("tr",{key:s.classroomId},[i("td",null,d(s.classroomName),1),i("td",null,d(s.equipmentType),1),i("td",null,d(s.equipmentCount),1),i("td",null,d(s.capacity),1),i("td",null,[l(b,{onClick:N=>n.editClassroom(s),class:"mr-2"},{default:o(()=>[r("mdi-pencil")]),_:2},1032,["onClick"]),l(b,{onClick:N=>n.deleteClassroom(s)},{default:o(()=>[r("mdi-delete")]),_:2},1032,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1}),l(R,{modelValue:a.dialogVisible,"onUpdate:modelValue":e[6]||(e[6]=s=>a.dialogVisible=s),"max-width":"500px"},{default:o(()=>[l(y,null,{default:o(()=>[l(V,null,{default:o(()=>[r(d(a.dialogTitle),1)]),_:1}),l(C,null,{default:o(()=>[l(m,{modelValue:a.classroomName,"onUpdate:modelValue":e[2]||(e[2]=s=>a.classroomName=s),label:"机房名称",required:""},null,8,["modelValue"]),l(m,{modelValue:a.equipmentType,"onUpdate:modelValue":e[3]||(e[3]=s=>a.equipmentType=s),label:"设备类型",required:""},null,8,["modelValue"]),l(m,{modelValue:a.equipmentCount,"onUpdate:modelValue":e[4]||(e[4]=s=>a.equipmentCount=s),label:"设备数量",required:""},null,8,["modelValue"]),l(m,{modelValue:a.capacity,"onUpdate:modelValue":e[5]||(e[5]=s=>a.capacity=s),label:"容量",required:""},null,8,["modelValue"]),l(p,{color:"primary",onClick:n.saveClassroom},{default:o(()=>[r("保存")]),_:1},8,["onClick"]),l(p,{color:"error",onClick:n.closeDialog},{default:o(()=>[r("取消")]),_:1},8,["onClick"])]),_:1}),l(w)]),_:1})]),_:1},8,["modelValue"])]),_:1})}const Q=B(F,[["render",E],["__scopeId","data-v-3312a5ed"]]);export{Q as default};
